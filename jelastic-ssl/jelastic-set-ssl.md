# Установка SSL-сертификата в Jelastic
Тип сертификатов, поддерживаемые Jelastic:
* Single domain,
* Self-signed,
* Wildcard,
* Multiple domain,
* Extended validation single domain,
* Extended validation multiple domain,
* UCC Exchange,
* Low assurance/domain-validated certificate,
* Code signing certificate,
* Email certificate,
* Root signing certificate,
* Shared SSL.
Установить SSL-сертификат на облачном хостинге Jelastic возможно тремя способами:
1. REG.RU SSL: через окружение (только для технологического имени домена),
2. Дополнение бесплатных SSl-сертификатов для окружения Let's Encrypt Free SSL,
3. Установка SSL-сертификата через настройки окружения.

## 1 способ:
Войдите в [панель управления Jelastic](https://app.jelastic.regruhosting.ru/) и создайте новое окружение, нажав кнопку **Новое окружение**. В случае, если окружение уже создано перейдите в меню редактирования окружения, нажав кнопку **Изменить топологию окружения** в панели окружения. В открывшемся окне нажмите кнопку **SSL** (1) и включите переключатель REG.RU SSL (2), затем нажмите **Применить**. Далее необходимо дождаться установки SSL-сертификата. 
![Установка SSL-сертификата для технологического домена](jelastic-ssl-1var.png)
По факту окончатия установки поступит уведомление на контактный email. Данный SSL-сертификат будет установлен для технологического домена окружения.
>Технологический домен является полноценным доменом 4-го уровня, привязанным к вашей услуге хостинга. Технологический домен доступен сразу после заказа услуги, в отличие от других ваших доменов, на обновление DNS-зоны которых может потребоваться до 72 часов после добавления. Изначально добавлен как псевдоним к основному домену хостинга.
>Например: env-1234567.jelastic.regruhosting.ru

## 2 способ
Для того, чтобы получить бесплатный SSL-сертификат для hostname окружения необходимо выполнить следующие действия:
1. Нажмите кнопку **Магазин приложений** в открывшемся меню нажмите **Дополения** (1) и введите в поле поиска *Let's Encrypt Free SSL* (2) и нажмите **Установить**.
![Установка SSL-сертификата из магазина приложений](jelastic-ssl-var2.png)
Также возможно импортировать (кнопка **Импорт** в панели Jelastic) дополнение файлом *manifest.jps* из репозитория:
https://github.com/jelastic-jps/lets-encrypt/blob/master/manifest.jps
![Импорт дополнения в Jelastic](jelastic-ssl-var2-import.png)
2. После того, как необходимые данные для установки дополнения будут получены, появится окно следующего содержания:
![Установка SSL для ноды](jelastic-ssl-var2-set.png)
* В поле *External Domain(s)* необходимо указать домен(ы), чтобы получить SSL-сертификат для каждого из них. Если доменных имен много, необходимо указывать их через запятую, без пробелов. Оставив поле пустым SSL-сертификат будет установлен для технологического доменого имени окружения.
* В раскрывающемся списке *Имя окружения* выберете окружение, на котором будет установлен(ы) SSL-сертификат(ы).
* Выберете ноду окружения.
После этого нажмите **Установить**.
>Обратите внимание, что для настройки дополнения требуется публичный IP-адрес. В случае, если к ноде не прикреплен публичный IP-адрес, он будет добавлен автоматически (Public IP - является платной опцией, стомость можно посмотреть во вкладке **Баланс**, нажать **Квоты и цены**).
3. Процесс установки может занять несколько минут. По завершении можно перейти в **Настройки**, нажать **SSL**, в графе *Пользовательский SSL* можно проверить активна ли поддержка HTTPS и обнаружить дату истечения срока действия сертификата.
Информацию по обновлению, настройке и удалению дополнения Let's Encrypt Free SSL можно найти по следующей ссылке:
https://jelastic.com/blog/free-ssl-certificates-with-lets-encrypt/

## 3 cпособ:
Чтобы добавить пользовательский SSL-сертификат для окружения Jelastic необъодимо:
* Доменное имя,
* Серверный ключ (private.key),
* Промежуточный сертификат (CA.crt),
* Сертификат домена (domen.crt).

Чтобы установить SSL-сертификат необходимо перейти в **Настройки** окружения, выбрать в списке **Пользовательский SSL** и загрузить в соответсвующие поля необходимые сертификаты, нажать **Сохранить**. SSL-сертификат будет установлен.
![Пользовательский SSL](kak-ustanovit-ssl-na-jelastic-5.png)
Файлы необходимо загружать в формате .crt, .csr и .key. Также допустим формат .txt.
Файлы должны содержать записи, включая начальную и конечную строки, вида:
```
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----
```
Файл серверного ключа должен содержать записи, включая начальную и конечную строки, вида:
```
-----BEGIN RSA PRIVATE KEY-----
-----END RSA PRIVATE KEY-----
```
# Источники:
1. [Jelastic SSL Certificate](https://docs.jelastic.com/jelastic-ssl)
2. [Free Let’s Encrypt SSL Certificates: Out-of-Box Integration with the Most Popular Software Stacks](https://jelastic.com/blog/free-ssl-certificates-with-lets-encrypt/)
3. [Как установить SSL-сертификат на Jelastic](https://www.reg.ru/support/hosting-i-servery/oblachnye-servisy-jelastic/rabota-s-jelastic/kak-ustanovit-ssl-na-jelastic)
4. [Как конвертировать данные бесплатного SSL-сертификата в файлы с расширениями .key, .crt, ca.crt](https://www.reg.ru/support/ssl-sertifikaty/ustanovka-ssl-sertifikata/kak-konvertirovat-dannyye-besplatnogo-ssl-sertifikata-v-fayly-s-rasshireniyami-key-crt-cacrt)
5. [Как купить SSL-сертификат?](https://www.reg.ru/support/ssl-sertifikaty/zakaz-ssl-sertifikata/kak-kupit-ssl-sertifikat)